---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/base-layout.astro';
import Header from '../components/layout/header.astro';
import Footer from '../components/layout/footer.astro';
import MinimalHero from '../components/ui/minimal-hero.astro';
import FeaturedGrid from '../components/ui/featured-grid.astro';
import DotBackground from '../components/ui/dot-background.astro';

// Get featured art pieces
const artPieces = await getCollection('art');
const featuredArt = artPieces
  .filter(piece => piece.data.featured)
  .map(piece => ({
    slug: piece.slug,
    title: piece.data.title,
    description: piece.data.description,
    heroImage: (typeof piece.data.heroImage === 'string' ? piece.data.heroImage : piece.data.heroImage?.src) || '',
    category: piece.data.category,
  }));
---

<BaseLayout 
	title="Carlos Garcia | 3D Artist & Educator | Technical Art & Creative Tools" 
	description="Portfolio of Carlos Garcia - Creative technologist specializing in 3D art, pipeline development, and technical education. Explore projects in Houdini, Blender, and innovative creative tools."
	keywords="Carlos Garcia, 3D Artist, Technical Artist, Educator, Pipeline Development, Houdini Artist, Blender, Creative Tools, San Antonio 3D Art, Procedural Art"
>
<Header />
	<main class="min-h-screen w-full bg-background text-foreground">
		<DotBackground />
		
		<!-- Hero Section -->
		<MinimalHero />

		<!-- Featured Work -->
		<FeaturedGrid artPieces={featuredArt} />
	</main>
<Footer />
</BaseLayout>