---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/layout/Header.astro';
import Footer from '../components/layout/Footer.astro';
import HeroSection from '../components/ui/hero-section.astro';
import { FeaturesSection } from '../components/ui/features-section';
import DotBackground from '../components/ui/dot-background';
import Divider from '../components/containers/Divider.astro';

// Get featured art pieces
const artPieces = await getCollection('art');
const featuredArt = artPieces
  .filter(piece => piece.data.featured)
  .map(piece => ({
    slug: piece.slug,
    title: piece.data.title,
    description: piece.data.description,
    heroImage: (typeof piece.data.heroImage === 'string' ? piece.data.heroImage : piece.data.heroImage?.src) || '',
    category: piece.data.category,
  }));
---

<BaseLayout 
	title="Carlos Garcia | 3D Artist & Educator | Technical Art & Creative Tools" 
	description="Portfolio of Carlos Garcia - Creative technologist specializing in 3D art, pipeline development, and technical education. Explore projects in Houdini, Blender, and innovative creative tools."
	keywords="Carlos Garcia, 3D Artist, Technical Artist, Educator, Pipeline Development, Houdini Artist, Blender, Creative Tools, San Antonio 3D Art, Procedural Art"
>
<Header />
	<main class="min-h-screen w-full bg-white dark:bg-zinc-950 text-gray-900 dark:text-gray-200">
		<DotBackground client:idle />
		
		<!-- Hero Section -->
		<HeroSection />

		<!-- Divider -->
		<Divider />

		<!-- Features Section -->
		<FeaturesSection featuredArt={featuredArt} client:load />
		
		<!-- Divider -->
		<Divider />
	</main>
<Footer />
</BaseLayout>