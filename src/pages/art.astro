---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/base-layout.astro';
import Header from '../components/layout/header.astro';
import Footer from '../components/layout/footer.astro';
import PageMain from '../components/layout/page-main.astro';
import PageContainer from '../components/layout/page-container.astro';
import PageHeader from '../components/layout/page-header.astro';
import DotBackground from '../components/ui/dot-background.astro';
import ArtGrid from '../components/art/art-grid-wrapper';

const artPieces = await getCollection('art');
const artData = artPieces.map(piece => ({
	slug: piece.slug,
	title: piece.data.title,
	description: piece.data.description,
	heroImage: typeof piece.data.heroImage === 'string' ? piece.data.heroImage : piece.data.heroImage?.src,
	category: piece.data.category
}));

const isEmpty = artData.length === 0;
---

<BaseLayout 
	title="3D Art Gallery | Carlos Garcia | Digital Sculptures & Environments" 
	description="Explore the 3D art portfolio of Carlos Garcia featuring digital sculptures, procedural environments, character work, and creative experiments in Houdini, Blender, and other 3D tools."
	keywords="3D Art, Digital Sculpture, 3D Environments, Houdini Art, Blender Art, Character Design, Procedural Art, Technical Art Portfolio"
>
	<Header />
	<PageMain class="text-foreground">
		<DotBackground />
		
		<div class="relative z-10 w-full py-24 sm:py-32">
			<PageContainer>
				<PageHeader
					title="Art"
					description="Digital art, procedural experiments, and 3D explorations"
				/>
				
				{isEmpty ? (
					<div class="text-center py-16">
						<p class="text-foreground-muted text-lg">
							No artwork yet. Check back soon.
						</p>
					</div>
				) : (
					<ArtGrid artPieces={artData} client:load />
				)}
			</PageContainer>
		</div>
	</PageMain>
	<Footer />
</BaseLayout>
